---
title: "é€€å±ˆãªã“ã¨ã¯Denoã«ã‚„ã‚‰ã›ãŸã„"
emoji: "ğŸ¦•"
type: "tech"
topics: ["TypeScript","deno"]
published: true
published_at: 2020-06-30 22:51
---
  
post Node.jsã¨ã—ã¦5æœˆã«ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ [Deno](https://deno.land/) ã€‚
npmã‚„package.jsonã‚’ãªãã—ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’URLã‹ã‚‰ç›´æ¥importã™ã‚‹å½¢ã«ãªã£ãŸã‚Šã€TypeScriptãŒãã®ã¾ã¾å‹•ã„ãŸã‚Šã¨æ§˜ã€…ãªé­…åŠ›ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯æ™®æ®µé£ã„ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã¨ã—ã¦è¦‹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚
Pythonã‚„ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒè‚Œã«åˆã‚ãªãã¦ã€æ‰‹æ…£ã‚ŒãŸJS(TS)ã§æ›¸ããŸã„ãƒãƒ³[^1]ã«ãŠã™ã™ã‚ã§ã™ã€‚

## å°å…¥ã¨å®Ÿè¡Œ
ã‹ã„ã¤ã¾ã‚“ã§æ›¸ãã¾ã™ã€‚
è©³ç´°ã¯ [å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://deno.land/manual/getting_started/installation) ã‚„ã»ã‹ã®ç´¹ä»‹è¨˜äº‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### å°å…¥
homebrewç­‰ã§å…¥ã‚Œã‚‰ã‚Œã¾ã™ã€‚nvmã‚„nodebrewè¦‹åˆã„ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¯è¿½ã„è¿½ã„ã§ã‚ˆã„ã¨æ€ã„ã¾ã™ã€‚

```sh
$ brew install deno
```

### å®Ÿè¡Œ
å®Ÿè¡Œã¯  `deno run <FILENAME>` ã§ã§ãã¾ã™ã€‚
Denoã¯ã€å®‰å…¨ã®ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãç­‰ã‚’è¡Œã†å ´åˆã€é©åˆ‡ãª [æ¨©é™](https://deno.land/manual/getting_started/permissions) ã‚’ä¸ãˆãªã„ã¨å‹•ãã¾ã›ã‚“ã€‚
ã“ã‚Œã¯ã€å®Ÿè¡Œæ™‚ã«ãƒ•ãƒ©ã‚°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã§ãã¾ã™ã€‚
ãŸã¨ãˆã°ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã‚’ä¼´ã†å ´åˆã¯ `deno run --allow-read <FILENAME>` ã¨ãªã‚Šã¾ã™ã€‚

## Denoã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
Denoã¯ã€æ¨™æº–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ [`Deno`](https://doc.deno.land/https/github.com/denoland/deno/releases/latest/download/lib.deno.d.ts#Deno) ãŒæä¾›ã•ã‚Œã¾ã™ã€‚
ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ç­‰ã®åŸºæœ¬çš„ãªãƒ¡ã‚½ãƒƒãƒ‰ãŒã“ã“ã‹ã‚‰ç›´æ¥ä½¿ç”¨ã§ãã‚‹ã®ã§ã€Node.jsã®ã‚ˆã†ã« `fs` ç­‰ã‚’å‘¼ã³å‡ºã•ãªãã¦ã‚‚ã•ã‚‰ã£ã¨æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
$ deno
Deno 1.1.2
exit using ctrl+d or close()
> Deno.cwd()
/Users/<**username**>/Development/sandbox
```

### 3ã¤è¦šãˆã‚Œã°ã ã„ãŸã„ãªã‚“ã¨ã‹ãªã‚‹
#### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ç­‰ã‚’ãƒ«ãƒ¼ãƒ—ã™ã‚‹
[`Deno.readDir()`*](https://doc.deno.land/https/github.com/denoland/deno/releases/latest/download/lib.deno.d.ts#Deno.readDir) ã‚’ä½¿ã„ã¾ã™ã€‚ `AsyncIterable` ãŒè¿”ã£ã¦ãã‚‹ã®ã§ã€ `for await of` ã§å›ã›ã¾ã™ã€‚
`--allow-read` ãƒ•ãƒ©ã‚°ãŒå¿…è¦ã§ã™ã€‚

```typescript:readDir.ts
for await (const item of Deno.readDir('.')) {
  console.log(item);
}
```

```sh:å®Ÿè¡Œ
$ ls -F
fuga/            hoge.txt         readDir.ts

$ deno run --allow-read readDir.ts
{ name: "readDir.ts", isFile: true, isDirectory: false, isSymlink: false }
{ name: "hoge.txt", isFile: true, isDirectory: false, isSymlink: false }
{ name: "fuga", isFile: false, isDirectory: true, isSymlink: false }
```

#### ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã‚’å‹•ã‹ã™
[`Deno.run()`*](https://doc.deno.land/https/github.com/denoland/deno/releases/latest/download/lib.deno.d.ts#Deno.run) ã‚’ä½¿ã„ã¾ã™ã€‚
`--allow-run` ãƒ•ãƒ©ã‚°ãŒå¿…è¦ã§ã™ã€‚
ã“ã‚Œã¯Promiseã‚’è¿”ã•ãªã„åŒæœŸAPIã§ã™ã€‚

```typescript:run.ts
const p = Deno.run({
  cmd: ['echo', 'hoge'],
});
console.log(p);
```

```sh:å®Ÿè¡Œ
$ deno run --allow-run run.ts
hoge
Process { rid: 3, pid: 22288 }
```

æ‰‹å…ƒã§ä½¿ã†ã ã‘ãªã®ã«ã„ã¡ã„ã¡é…åˆ—ã§æ›¸ãã®ã¯ã‹ã£ãŸã‚‹ã„ã®ã§ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® [exec](https://deno.land/x/exec) ã‚’ä½¿ã£ãŸæ–¹ãŒå¹¸ã›ã«ãªã‚Œãã†ã§ã™ã€‚

```typescript:exec.ts
import { exec } from "https://deno.land/x/exec/mod.ts";
await exec('echo hoge');
```

#### ãƒ†ã‚­ã‚¹ãƒˆã‚’èª­ã‚€
[`Deno.readTextFile()`*](https://doc.deno.land/https/github.com/denoland/deno/releases/latest/download/lib.deno.d.ts#Deno.readTextFile) ã‚’ä½¿ã„ã¾ã™ã€‚
`--allow-read` ãƒ•ãƒ©ã‚°ãŒå¿…è¦ã§ã™ã€‚

```typescript:readTextFile.ts
const text = await Deno.readTextFile('./hoge.txt');
console.log(text);
```

```sh:å®Ÿè¡Œ
$ deno run --allow-read readTextFile.ts
ã»ã’ã»ã’
```

## ãŠã‚ã‚Š
ã‚„ã£ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

[^1]: ã‚ãŸã—ã ã€‚
